## Database > RDS for PostgreSQL > DBインスタンス

## DBインスタンス

DBインスタンスは仮想機器とインストールされたPostgreSQLを包含する概念で、RDS for PostgreSQLが提供するPostgreSQLの単位です。
DBインスタンスのOSに直接アクセスすることはできず、DBインスタンス作成時に入力したポートを介してデータベースにのみアクセスできます。使用できるポート範囲には下記のような制約があります。

* 使用できるポート範囲は5432～45432の間です。

DBインスタンスは、顧客が付与する名前と自動的に付与される32バイトのIDで識別されます。
DBインスタンス名は下記のような制約があります。

* DBインスタンス名は、リージョンごとに一意でなければなりません。
* DBインスタンス名は、1～100文字まで、英数字、数字、一部の記号(-, _, .)しか使用できず、最初の文字は英数字のみ使用できます。

## DBインスタンス作成

以下の設定を通じてDBインスタンスを作成できます。

### アベイラビリティゾーン

NHN Cloudは、物理的なハードウェアの問題で発生する障害に備えるため、システム全体を複数のアベイラビリティゾーンに分けています。このアベイラビリティゾーンごとに、ストレージシステム、ネットワークスイッチ、ラック、電源装置がすべて別々に構成されています。一つのアベイラビリティゾーン内で発生する障害は他のアベイラビリティゾーンに影響を与えないため、サービス全体の可用性が高くなります。DBインスタンスを複数のアベイラビリティゾーンに分けて構築すれば、サービスの可用性をさらに高めることができます。複数のアベイラビリティゾーンに分散して作成されたDBインスタンス同士でネットワーク通信が可能で、この時発生するネットワーク使用費用は請求されません。

> [注意]
> 既に作成したDBインスタンスのアベイラビリティゾーンは変更できません。

### DBエンジン

下記のバージョンを使用できます。

| バージョン                 | 備考 |
|----------------------|----|
| PostgreSQL 14.6      |    |


### DBインスタンスタイプ

DBインスタンスはタイプによって異なるCPUコア数とメモリ容量を持っています。
DBインスタンスを作成する際、データベースのワークロードに応じて適切なDBインスタンスタイプを選択する必要があります。

| タイプ | 説明                                                      |
|----|-----------------------------------------------------------|
| m2 | CPUとメモリをバランスよく設定したタイプです。                                |
| c2 | CPUの性能を高く設定したインスタンスタイプです。                               |
| r2 | のリソースに比べ、メモリ使用量が多い場合に使用できます。                     |
| x1 | 高スペックのCPUとメモリをサポートするタイプです。高性能が必要なサービスやアプリケーションに使用します。 |

既に作成したDBインスタンスのタイプはWebコンソールから簡単に変更可能です。

> [注意]
> 既に作成したDBインスタンスのタイプを変更すると、DBインスタンスが終了するため、多少のダウンタイムが発生します。

### データストレージ

データストレージにデータベースのデータファイルを保存します。DBインスタンスはHDD、SSDの2種類のデータストレージタイプをサポートします。データストレージのタイプによって性能と価格が異なるため、データベースのワークロードに応じて適切なタイプを選択する必要があります。データストレージは20GB～2TBで作成できます。

> [注意]
> 既に作成したDBインスタンスのデータストレージタイプは変更できません。

> [参考]
> データストレージを2TB以上使用する場合は、NHN Cloudサポートにお問い合わせください。

以下の作業は、データストレージのI/O容量を使用するため、進行中にDBインスタンスの性能が低下する可能性があります。

* 単一DBインスタンスのバックアップ
* 特定の時点への復元

### 情報

DBインスタンスの基本情報を設定します。インスタンス名、説明、DBポートと基本的に作成するユーザー情報を入力できます。
入力したユーザーIDはDDL権限で作成されます。

**DDL**
* CRUD権限を含み、DDLクエリを実行できる権限を持っています。

**CRUD**
* 照会権限を含み、データを変更する権限を持っています。
    * CRUDユーザーは、DBインスタンス作成完了後、**DB &ユーザー**タブで作成できます。

> [注意]
> DDLユーザーは、DBインスタンスごとに1つだけ作成することができ、すでに作成したユーザーの権限は変更できません。

### Floating IP

外部からDBインスタンスにアクセスするには、Floating IPをDBインスタンスに接続する必要があります。Internet Gatewayが接続されたサブネットを接続する場合のみ、Floating IPを作成できます。Floating IPは使用と同時に課金され、これとは別にFloating IPを介したインターネット方向のトラフィックが発生した場合は別途課金されます。

### パラメータグループ

パラメータグループは、DBインスタンスにインストールされたデータベースを設定できるパラメータの集合です。DBインスタンス作成時に必ず一つのパラメータグループを選択する必要があります。パラメータグループは、作成後も自由に変更できます。パラメータグループの詳細は[パラメータグループ](parameter-group/)の項目を参照してください。

### DBセキュリティグループ

DBセキュリティグループは、外部からの侵入に備えて接続を制限するために使用します。送受信トラフィックに対して特定のポート範囲またはデータベースポートに対してアクセスを許可できます。DBインスタンスに複数のDBセキュリティグループを適用できます。DBセキュリティグループの詳細は[DBセキュリティグループ](db-security-group/)の項目を参照してください。

### バックアップ

DBインスタンスのデータベースを定期的にバックアップするように設定したり、Webコンソールを通じて好きなタイミングでバックアップを作成できます。バックアップが実行される間、性能低下が発生する可能性があります。サービスに影響を与えないように、サービスの負荷が少ない時間にバックアップすることを推奨します。バックアップファイルは内部バックアップストレージに保存され、バックアップ容量に応じて課金されます。予期せぬ障害に備えるため、定期的にバックアップを実行するように設定することを推奨します。バックアップの詳細は[バックアップと復元](backup-and-restore/)の項目を参照してください。

### 基本通知

DBインスタンス作成時、基本通知を設定できます。基本通知を設定すると、`{DBインスタンス名}-default`という名前で新しい通知グループが作成され、下記の通知項目が自動的に設定されます。基本通知で作成された通知グループは自由に修正、削除できます。通知グループの詳細は[通知グループ](notification/)の項目を参照してください。

| 項目                       | 比較方法 | しきい値         | 持続時間 |
|----------------------------|-------|---------------|-------|
| CPU使用率                  | &gt;= | 80%           | 5分  |
| Storage残り使用量           | &lt;= | 5,120MB       | 5分  |
| Database Connection Status | &lt;= | 0             | 0分  |
| Storage使用量              | &gt;= | 95%           | 5分  |
| データストレージの障害               | &lt;= | 0             | 0分  |
| Connection Ratio           | &gt;= | 85%           | 5分  |
| メモリ使用量                  | &gt;= | 90%           | 5分  |


## DBインスタンス一覧

Webコンソールで作成されたDBインスタンスを確認できます。DBインスタンスグループ単位でまとめて見たり、個々のDBインスタンスで見ることができます。

![db-instance-list](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-list-ko.png)

❶ DBインスタンス画面モードを変更できます。
❷最近収集されたモニタリング指標を表示します。
❸現在の状態を確認できます。
❹進行中の作業がある場合、スピナーが表示されます。
❺検索条件を変更できます。

DBインスタンスの状態は以下のような値で構成され、ユーザーの行為と現在の状態によって変更されます。

| 状態              | 説明          |
|-------------------|---------------|
| BEFORE_CREATE     | 作成前       |
| AVAILABLE         | 使用可能       |
| STORAGE_FULL      | 容量不足        |
| FAIL_TO_CREATE    | 作成失敗       |
| FAIL_TO_CONNECT   | 接続失敗       |
| SHUTDOWN          | 停止          |

変更できる検索条件は次のとおりです。

![db-instance-list-filter](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-list-filter-ko.png)

❶ DBインスタンスの状態をフィルタリング条件として検索できます。
❷アベイラビリティゾーンをフィルタリング条件として検索できます。

## DBインスタンス詳細

DBインスタンスを選択すると、詳細情報を確認できます。

![db-instance-detail-basic](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-basic-ko.png)

❶接続情報のドメインをクリックすると、IPアドレスを確認できるポップアップ画面が表示されます。
❷ DBセキュリティグループをクリックすると、DBセキュリティルールを確認できるポップアップ画面が表示されます。
❸パラメータグループをクリックすると、パラメータを確認できる画面に移動します。
❹マウスでドラッグ＆ドロップして詳細情報パネルの高さを調整できます。
❺詳細情報パネルの高さをあらかじめ指定した高さに調整できます。

### 接続情報

DBインスタンス作成時に内部ドメインを発行します。内部ドメインは、ユーザーのVPCサブネットに属するIPアドレスを指します。

Floating IPを作成した場合、外部ドメインを追加で発行します。外部ドメインはFloating IPのアドレスを指します。外部ドメインまたはFloating IPは外部からアクセスが可能なので、DBセキュリティグループのルールを適切に設定してDBインスタンスを保護する必要があります。

### ログ

DBインスタンスのログタブでは、各種ログファイルの閲覧や、ダウンロードを行うことができます。ログファイルは下記のように決められた設定でローテーションされます。一部のログファイルは、パラメータグループで有効または無効にできます。

| 項目           | ローテーション設定 | 変更するかどうか | 
|----------------|-----------|-------|
| postgresql.log | 100MB 40個 | 固定  |
| backup.log     | 毎日10個 | 固定  |

![db-instance-detail-log](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-log-ko.png)

❶ **ログ表示**をクリックすると、ログファイルの内容を確認できるポップアップ画面が表示されます。最大65,535Bytesのログを確認できます。
❷ **インポート**をクリックすると、DBインスタンスのログファイルをダウンロードできるようにリクエストします。
❸ダウンロードの準備が整うと、**ダウンロード**ボタンが表示されます。クリックすると、ログをダウンロードします。

> [注意]
> **インポート**をクリックすると、約5分間、ログファイルがバックアップストレージにアップロードされ、ログファイルのサイズ分だけバックアップストレージの容量が課金されます。
> **ダウンロード**をクリックすると、ログファイルのサイズ分だけインターネットトラフィックが課金されます。


### データベース&ユーザー

DBインスタンスの**データベース＆ユーザー**タブでは、DBエンジンに作成されたデータベースとユーザーを照会および制御できます。


#### データベースの作成

![db-instance-detail-db-create](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-db-create-ko.png)

❶ **+ 作成**をクリックすると、データベースの名前を入力できるポップアップ画面が表示されます。
❷データベース名を入力した後、**作成**をクリックしてデータベースを作成できます。

データベース名には以下のような制約があります。

* 1～63文字まで、引用符(',")を除いた文字のみ使用できます。
* `postgres` `information_schema` `performance_schema` `repmgr` `db_helper` `sys` `mysql` `rds_maintenance` `pgpool` `nsight` `watchdog` `barman` `rman`はデータベース名に使用できません。

#### データベースの修正

![db-instance-detail-db-modify](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-db-modify-ko.png)

❶修正するデータベース行の**修正**をクリックすると、データベース情報を修正できるポップアップ画面が表示されます。
❷ **修正**をクリックして修正をリクエストできます。
❸ **変更予定アクセス制御即時適用**をチェックすると、アクセス制御ルールにも修正内容が即時適用されます。

#### データベースの削除

![db-instance-detail-db-delete](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-db-delete-ko.png)

❶削除するデータベースを選択し、**削除**をクリックすると、削除確認ポップアップ画面が表示されます。
❷ **削除**をクリックして削除をリクエストできます。

#### ユーザーの作成

![db-instance-detail-user-create](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-user-create-ko.png)

❶ **+ 作成**をクリックすると、ユーザー追加ポップアップ画面が表示されます。
❷ユーザーIDを入力します。

ユーザーIDには以下のような制約があります。

* 1～63文字まで、引用符(',")を除いた文字のみ使用できます。
* `postgres` `repmgr` `barman` `rman` `pgpool` `nsight` `watchdog` `dba` `manager` `mysql.session` `mysql.sys` `mysql.infoschema` `sqlgw` `admin` `etladm` `alertman` `prom` `rds_admin` `rds_mha` `rds_repl` `mariadb.sys`はユーザーIDとして使用できません。

❸パスワードを入力します。

パスワードには以下の制約があります。

* 1～100文字まで、引用符(',")を除く文字のみ使用できます。

❹ユーザーに付与する権限を選択します。付与できる権限と説明は次のとおりです。

* CRUD権限を含み、DDLクエリを実行できる権限を持っています。
* 照会権限を含み、データを変更する権限を持っています。

#### ユーザーの修正

![db-instance-detail-user-modify](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-user-modify-ko.png)

❶修正するユーザー行の**修正**をクリックすると、ユーザー情報を修正できるポップアップ画面が表示されます。
❷パスワードを入力しないと変更されません。
❸ **変更予定アクセス制御即時適用**をチェックすると、アクセス制御ルールにも修正内容が即時適用されます。

#### ユーザーの削除

![db-instance-detail-user-delete](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-user-delete-ko.png)

❶削除するユーザーを選択し、ドロップダウンメニューをクリックします。
❷ **削除**をクリックすると、**削除確認**ポップアップ画面が表示されます。**確認**をクリックして削除をリクエストできます。

### アクセス制御

DBインスタンスの**アクセス制御**タブでは、特定のデータベースとユーザーに対するDBエンジンのアクセスルールを照会及び制御できます。ここで設定したルールは`pg_hba.conf`ファイルに適用されます。

![db-instance-detail-hba](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-hba-ko.png)

❶アクセス制御ルールの適用状態を確認できます。
❷進行中の作業があれば、スピナーが表示されます。
❸検索キーワードを入力して検索できます。

アクセス制御の状態は以下のような値で構成され、ユーザーの行為と現在の状態に基づいて変更されます。

| 状態    | 予約状態 | 説明         |
|---------|--------|--------------|
| CREATED | CREATE | 作成予約(適用必要) |
| CREATED | MODIFY | 修正予約(適用必要) |
| CREATED | DELETE | 削除予約(適用必要) |
| APPLIED | NONE   | 適用済み         |
| -       | -      | 適用不可      |

> [注意]
> 特定のデータベースとユーザーを選択して追加したルールの対象がすべて削除された場合、適用不可の状態と表示され、設定ファイルには適用されません。


#### アクセス制御ルールの追加

![db-instance-detail-hba-create](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-hba-create-ko.png)

❶ **+ 作成**をクリックすると、アクセス制御ルールの追加ポップアップ画面が表示されます。
❷ルール適用対象を全体対象に指定するか、特定のデータベースやユーザーを選択して指定できます。
- **ユーザー指定**を選択すると、**データベース＆ユーザー**タブで追加したデータベース、ユーザーを選択するドロップダウンメニューが表示されます。
❸ルールを適用する接続アドレスをCIDR形式で入力します。
❹認証方法を選択します。RDS for PostgreSQLでサポートする認証方式は次のとおりです。

| 認証方式             | DBエンジン設定値   | 説明                                                    |
|---------------------|---------------|---------------------------------------------------------|
| 信頼(パスワード不要)      | trust         | パスワードや他の認証なしですべての接続を許可します。                            |
| 接続ブロック             | reject        | 全ての接続を遮断します。                                           |
| パスワード(SCRAM-SHA-256) | scram-sha-256 | **データベース&ユーザー**タブで設定したパスワードでSCRAM-SHA-256認証を行うようにします。 |

❺上/下矢印ボタンでルールを適用する順序を調整します。
- アクセス制御ルールは上から順番に適用され、先に適用されたルールが優先されます。
- 上部に登録されたアクセス許可ルールが先に適用されると、下部にアクセス遮断ルールがあってもアクセスが許可されます。
- 逆に、下部にアクセス許可ルールがあっても、上段に登録されたアクセス遮断ルールが先に適用されている場合はアクセスができません。
❻設定を終えた後、**変更事項の適用**をクリックしてDBインスタンスにアクセス制御設定を適用します。
❼ DBインスタンスに適用されると、状態が**適用済み**に変更されます。

#### アクセス制御ルールの修正

![db-instance-detail-hba-modify](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-hba-modify-ko.png)

❶修正するアクセス制御ルール行の**修正**をクリックすると、既存の情報を修正できるポップアップ画面が表示されます。
❷修正したルールは**変更事項の適用**をクリックしてDBインスタンスにアクセス制御設定を適用する必要があります。

#### アクセス制御ルールの削除

![db-instance-detail-hba-delete](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-detail-hba-delete-ko.png)

❶削除するユーザーを選択し、**削除**をクリックすると、削除確認ポップアップ画面が表示されます。
❷削除したルールは、**変更の適用**をクリックしてDBインスタンスにアクセス制御設定を適用する必要があります。

## DBインスタンスの修正

Webコンソールを通じて作成されたDBインスタンスの様々な項目を簡単に変更できます。変更をリクエストした項目は、順次DBインスタンスに適用します。適用過程で再起動が必要な場合、すべての変更を適用した後、DBインスタンスを再起動します。変更不可能な項目と再起動が必要な項目は次のとおりです。

| 項目            | 変更可否 | 再起動が必要かどうか              |
|-----------------|----------|-------------------------|
| アベイラビリティゾーン        | いいえ      |                         |
| DBエンジン         | いいえ      |                         |
| DBインスタンスタイプ    | はい       | はい                      |
| データストレージの種類   | いいえ      |                         |
| データストレージサイズ   | はい       | はい                      |
| 名前            | はい       | いいえ                     |
| 説明            | はい       | いいえ                     |
| DBポート         | はい       | はい                      |
| VPCサブネット       | いいえ      |                         |
| Floating IP          | はい       | いいえ                     |
| パラメータグループ       | はい       | 変更されたパラメータの再起動可否によって決定 |
| DBセキュリティグループ      | はい       | いいえ                     |
| バックアップ設定         | はい       | いいえ                     |
| データベース&ユーザー制御 | はい       | いいえ                     |
| アクセス制御         | はい       | いいえ                     |


## DBインスタンスの削除

使用しないDBインスタンスは削除できます。削除されたDBインスタンスは復旧できないので注意が必要です。

## バックアップ

障害状況に備えて、DBインスタンスのデータベースを復旧できるように事前に準備できます。必要なときにWebコンソールでバックアップを実行したり、定期的にバックアップが実行されるように設定できます。詳細は、[バックアップ](backup-and-restore/#_1)を参照してください。

## 復元

バックアップを利用して希望の時点にデータを復元できます。復元時は常に新しいDBインスタンスが作成され、既存のDBインスタンスに復元することはできません。詳細は[復元](backup-and-restore/#_6)の項目を参照してください。

## 容量の確保

急激な負荷でWALログが過剰に作成されてデータストレージの容量が不足する場合、Webコンソールの容量確保機能を利用してWALログを削除できます。Webコンソールで容量確保を選択すると、DBインスタンスのWALログを選択できるポップアップ画面が表示されます。WALログを選択した後、**OK**を押して、選択した項目以前に作成されたすべてのWALログを削除します。容量確保機能は一時的に容量を確保する機能です。継続して容量が不足している場合は、サービス負荷に合わせてデータストレージのサイズを拡張する必要があります。

> [注意]
> 削除されたWALログによっては、特定の時点に復元されない場合があります。

## パラメータグループ変更事項の適用

DBインスタンスに接続されたパラメータグループの設定が変更されても、この変更はDBインスタンスに自動的に適用されません。もし、DBインスタンスに適用されたパラメータと接続されたパラメータグループの設定が異なる場合、Webコンソールに**パラメータ**ボタンが表示されます。

次のいずれかの方法を使用してDBインスタンスにパラメータグループの変更を適用できます。

![db-instance-list-apply-parameter-group](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-list-apply-parameter-group-ko.png)

❶対象DBインスタンスの **パラメータ**をクリックするか
❷対象DBインスタンスを選択した後、ドロップダウンメニューから**パラメータグループの変更内容を適用**メニューをクリックします。

パラメータグループで再起動を必要とするパラメータが変更された場合、変更内容を適用する過程でDBインスタンスが再起動されます。

## DBインスタンスの再起動

PostgreSQLを再起動したい時、DBインスタンスを再起動できます。再起動時間を最小化するため、サービス負荷が低い時間帯に実行することを推奨します。

DBインスタンスの再起動を行うにはWebコンソールで

![db-instance-list-restart](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-list-restart-ko.png)

❶再起動したいDBインスタンスを選択した後、ドロップダウンメニューから**DBインスタンスの再起動**メニューをクリックします。

## DBインスタンスの強制再起動

DBインスタンスのPostgreSQLが正常に動作しない場合、強制的に再起動できます。強制再起動の場合、PostgreSQLにSIGTERMコマンドを実行して正常終了するのを10分間待ちます。10分以内にPostgreSQLが正常終了したら、仮想マシンを再起動します。10分以内に正常終了しない場合は、仮想マシンを強制的に再起動します。仮想マシンが強制的に再起動されると、作業中の一部のトランザクションが失われる可能性があり、データボリュームが破損して復旧が不可能になる可能性があります。強制再起動後、DBインスタンスの状態が使用可能な状態に戻らない場合があります。このような状況が発生した場合はサポートにお問い合わせください。

> [注意]
> データが失われたり、データボリュームが破損する可能性があるため、この機能は緊急かつ不可避的な状況以外では使用を控えてください。

DBインスタンスを強制的に再起動するには、Webコンソールで

![db-instance-list-force-restart](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-list-force-restart-ko.png)

❶強制再起動を行いたいDBインスタンスを選択し、ドロップダウンメニューから**DBインスタンス強制再起動**メニューをクリックします。

## データマイグレーション

* RDSはpg_dumpを利用してNHN Cloud RDSの外部にインポートすることができます。
* pg_dumpユーティリティはPostgreSQLをインストールしたときに基本的に提供されます。

### pg_dumpを利用してエクスポート

* NHN Cloud RDSのインスタンスを準備して使用します。
* エクスポートするデータを保存する外部インスタンス、またはローカルクライアントがインストールされたコンピュータの容量が十分に確保されていることを確認します。
* NHN Cloudの外部にデータをエクスポートする場合、Floating IPを作成してデータをエクスポートするRDSインスタンスに接続します。
* 下記のpg_dumpコマンドを使って外部にデータをエクスポートします。

#### ファイルでエクスポートする場合

```
pg_dump -h {rds_instance_floating_ip} -U {db_id} -p {db_port} -d {database_name} -f {local_path_and_file_name}
```

#### NHN Cloud RDS外部のPostgreSQLデータベースにエクスポートする場合

```
pg_dump  -h {rds_instance_floating_ip} -U {db_id} -p {db_port} -d {database_name} | psql -h {external_db_host} -U {external_db_id} -p {external_db_port} -d {external_database_name}
```

## 付録

### 付録1. ハイパーバイザー点検のためのDBインスタンスマイグレーションガイド

NHN Cloudは定期的にDBインスタンスのハイパーバイザーソフトウェアをアップデートし、セキュリティと安定性を向上させています。
点検対象ハイパーバイザーで稼働中のDBインスタンスは、マイグレーションを通じて点検が完了したハイパーバイザーに移動する必要があります。

DBインスタンスのマイグレーションは、NHN Cloudコンソールから開始できます。
下記のガイドに従って、コンソールにあるマイグレーション機能をご利用ください。
点検対象に指定されたDBインスタンスがあるプロジェクトに移動します。

#### 1. 点検対象DBインスタンスを確認します。

名前の横にマイグレーションボタンがあるDBインスタンスが点検対象インスタンスです。

![db-instance-planned-migration](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-planned-migration-ko.png)

マイグレーションボタンの上にマウスポインタを置くと、詳細な点検スケジュールを確認できます。

![db-instance-planned-migration-popup](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-planned-migration-popup-ko.png)

#### 2. 点検対象DBインスタンスに接続しているアプリケーションを終了する必要があります。

DBに接続されたサービスに影響を与えないように適切な措置を取ってください。
サービスに影響を及ぼすことが避けられない場合は、NHN Cloudサポートにご連絡いただければ、適切な対応をご案内いたします。

#### 3.点検対象のDBインスタンスを選択し、マイグレーションボタンをクリックした後、DBインスタンスのマイグレーション確認を求めるウィンドウが表示されたら、確認ボタンをクリックします。

![db-instance-planned-migration-confirm](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-planned-migration-confirm-ko.png)

#### 4. DBインスタンスのマイグレーションが終わるまで待機します。

DBインスタンスの状態が変更されない場合は、「更新」を行ってください。

![db-instance-planned-migration-status](https://static.toastoven.net/prod_rds_postgres/20240611/db-instance-planned-migration-status-ko.png)

DBインスタンスがマイグレーションされている間は、何の操作もできません。
DBインスタンスのマイグレーションが正常に完了しない場合、自動的に管理者に報告され、NHN Cloudから別途ご連絡いたします。
